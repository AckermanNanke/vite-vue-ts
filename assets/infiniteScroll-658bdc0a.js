import{d as h,o as y,b as r,c as _,f as m,n as $,_ as T,r as i,g as U,h as g,u as f,i as k,j as D,k as V,t as b,l as B,w as P,F as H,a as M}from"./index-d6c8d9c5.js";import{r as Y}from"./register-ffaff0a9.js";const F={class:"f-loading-icon"},j=h({__name:"LoadingIcon",props:{name:null},setup(u){const t=u;return y(()=>{}),(n,a)=>(r(),_("div",F,[m("i",{class:$("loading-"+t.name)},null,2)]))}});const E=T(j,[["__scopeId","data-v-078fece2"]]);function L(u,t){let n=0;return function(){let a=Date.now();Date.now()-n>t&&(u.apply(this,arguments),n=a)}}const z={class:"f-infitinite-scroll-loading f-flex f-align-center active"},q=h({__name:"InfitiniteScroll",props:{distance:null,delay:null},emits:["pullUp","pullDown"],setup(u,{emit:t}){const n=u,a=i(!1),e=i(!1),l=i(!1),s=i(null),p=i(),v=i(),C=U(()=>{if(!e.value)return a.value?"我已经到底线了":"上拉加载更多数据"}),w=L(o=>{if(e.value||l.value)return!1;p.value=o},n.delay),x=L(o=>{var d;if(e.value||l.value)return!1;v.value=o;const c=((d=v.value.changedTouches[0])==null?void 0:d.pageY)-p.value.touches[0].pageY;s.value.scrollHeight,c-n.distance>=0&&(l.value=!0,t("pullDown",{loadEnd:I,completed:S})),Math.abs(s.value.scrollHeight-s.value.clientHeight-s.value.scrollTop)<n.distance&&-c>=n.distance&&(e.value=!0,t("pullUp",{loadEnd:I,completed:S}))},n.delay);function N(o){if(e.value||l.value)return!1}function I(){e.value=!1,l.value=!1}function S(){a.value=!0}return y(()=>{}),(o,c)=>(r(),_("section",{class:"f-infitinite-scroll",ref_key:"scrollEl",ref:s,onTouchstart:c[0]||(c[0]=(...d)=>f(w)&&f(w)(...d)),onTouchend:c[1]||(c[1]=(...d)=>f(x)&&f(x)(...d)),onTouchmove:N},[g(o.$slots,"refresh",{},()=>[m("div",{class:$(["f-infitinite-scroll-loading f-flex f-align-center",{active:l.value}])},[l.value?(r(),k(E,{key:0,name:"circle-plain"})):D("",!0)],2)],!0),g(o.$slots,"default",{},void 0,!0),g(o.$slots,"upload",{},()=>[m("div",z,[e.value?(r(),k(E,{key:0,name:"circle-plain"})):D("",!0),V(" "+b(f(C)),1)])],!0)],544))}});const A=T(q,[["__scopeId","data-v-8216ac4d"]]),G={class:"scroll-box"},J=h({__name:"infiniteScroll",setup(u){const t=i([]);function n(e){setTimeout(()=>{t.value.push(1),e.loadEnd()},2e3)}function a(e){console.log(e),setTimeout(()=>{e.loadEnd()},1e3)}return y(()=>{Y({userName:"",password:"",phone:1,smsVerifiationCode:""})}),(e,l)=>{const s=A;return r(),_("div",G,[m("section",null,[B(s,{distance:20,delay:0,onPullUp:n,onPullDown:a},{default:P(()=>[(r(!0),_(H,null,M(f(t),(p,v)=>(r(),_("div",{class:"scroll",key:p},b(v+1),1))),128))]),_:1})])])}}});const Q=T(J,[["__scopeId","data-v-9f5b7173"]]);export{Q as default};
